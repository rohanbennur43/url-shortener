apiVersion: skaffold/v2alpha3
kind: Config
metadata:
  name: auth
deploy:
  kubectl:
    manifests:
      - ./infra/k8s/*
build:
  # local:
  googleCloudBuild:
    projectId: static-sum-449702-s3
  artifacts:
    - image: us.gcr.io/static-sum-449702-s3/auth #rohanbennur959/url-shortener-auth
      context: auth
      docker:
        dockerfile: Dockerfile
      sync:
        manual:
          - dest: .
            src: src/**/*.js
    - image: us.gcr.io/static-sum-449702-s3/urlmapper #rohanbennur959/url-shortener-mapper
      context: urlmapper
      docker:
        dockerfile: Dockerfile
      sync:
        manual:
          - dest: .
            src: src/**/*.js
    - image: us.gcr.io/static-sum-449702-s3/urlredirect #rohanbennur959/url-shortener-redirect
      context: urlredirect
      docker:
        dockerfile: Dockerfile
      sync:
        manual:
          - dest: .
            src: src/**/*.js
    - image: us.gcr.io/static-sum-449702-s3/url-shortener-frontend #rohanbennur959/url-shortener-frontend
      context: url-shortener-frontend
      docker:
        dockerfile: Dockerfile
      sync:
        manual:
          - dest: .
            src: "**/*.js"